! rm testgraphfilename_objects_unique.db
#the test is typically started from the tests folder (has to be started from there due to the local path), so you will find the testgraphfilename.db there
new graph "persistentgraph/persistentgraph_objects_unique" persist with "libGrPersistenceProviderSQLite.dll" to "Data Source=testgraphfilename_objects_unique.db;Version=3;"

show num nodes

new graph "persistentgraph/persistentgraph_objects_unique" "some non-persistent graph"

show num nodes

exec init

show num nodes

exec (::n)=find
show n.root
show object @@("%0")
exec showAvailabilityOfNestedGraphs
exec in ::n.nested1 { find }
exec in ::n.nested2 { (::n)=findSimple <; showAvailabilityOfNestedGraphs }
show n.root
show object @@("%4")
exec in ::n.nested1 { (::n)=findSimple <; showAvailabilityOfNestedGraphs }
show n.root
show object @@("%5")

new graph "persistentgraph/persistentgraph_objects_unique" persist with "libGrPersistenceProviderSQLite.dll" to "Data Source=testgraphfilename_objects_unique.db;Version=3;"

show num nodes

exec init

show num nodes

exec (::n)=find
show n.root
show object @@("%0")
exec showAvailabilityOfNestedGraphs
exec in ::n.nested1 { find }
exec in ::n.nested2 { (::n)=findSimple <; showAvailabilityOfNestedGraphs }
show n.root
show object @@("%4")
exec in ::n.nested1 { (::n)=findSimple <; showAvailabilityOfNestedGraphs }
show n.root
show object @@("%5")

new graph "persistentgraph/persistentgraph_objects_unique" "some non-persistent graph"

show num nodes

new graph "persistentgraph/persistentgraph_objects_unique" persist with "libGrPersistenceProviderSQLite.dll" to "Data Source=testgraphfilename_objects_unique.db;Version=3;"

show num nodes

exec (::n)=find
show n.root
show object @@("%0")
exec showAvailabilityOfNestedGraphs
exec in ::n.nested1 { find }
exec in ::n.nested2 { (::n)=findSimple <; showAvailabilityOfNestedGraphs }
show n.root
show object @@("%4")
exec in ::n.nested1 { (::n)=findSimple <; showAvailabilityOfNestedGraphs }
show n.root
show object @@("%5")

clear graph

show num nodes

quit
